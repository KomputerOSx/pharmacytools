(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7209:(e,s,a)=>{Promise.resolve().then(a.bind(a,8290))},8290:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var l=a(5155),t=a(2115),i=a(9904),n=a(7058);let c=(0,i.Wp)({apiKey:"AIzaSyDkX-oVmYk1KMVInuBMUPMxt5pvt0gpnEw",authDomain:"locum-guides.firebaseapp.com",projectId:"locum-guides",storageBucket:"locum-guides.firebasestorage.app",messagingSenderId:"1048727841562",appId:"1:1048727841562:web:543c12a6d73805ceb61aa3",measurementId:"G-986KFBNV0R"}),r=(0,n.aU)(c),d={getBlogs:async()=>{let e=(0,n.rJ)(r,"blogs");return(await (0,n.GG)(e)).docs.map(e=>({id:e.id,title:e.data().title,content:e.data().content}))},addBlog:async e=>{let s=(0,n.rJ)(r,"blogs");return(await (0,n.gS)(s,e)).id},deleteBlog:async e=>{let s=(0,n.H9)(r,"blogs",e);await (0,n.kd)(s)}},o=()=>(0,l.jsx)("div",{className:"hero is-fullheight",style:{position:"fixed",top:0,left:0,right:0,bottom:0},children:(0,l.jsx)("div",{className:"hero-body",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsx)("div",{className:"columns is-centered",children:(0,l.jsx)("div",{className:"column is-half",children:(0,l.jsxs)("div",{className:"box has-text-centered",children:[(0,l.jsx)("progress",{className:"progress is-primary is-small",max:"100",children:"Loading..."}),(0,l.jsx)("span",{className:"icon is-large",children:(0,l.jsx)("i",{className:"fas fa-spinner fa-pulse fa-3x"})}),(0,l.jsx)("h1",{className:"title is-4 mt-4",children:"Loading Content"}),(0,l.jsx)("h2",{className:"subtitle is-6 has-text-grey",children:"Fetching your blog posts..."}),(0,l.jsx)("div",{className:"tags is-centered mt-4",children:(0,l.jsxs)("span",{className:"tag is-info is-light is-medium",children:[(0,l.jsx)("span",{className:"icon",children:(0,l.jsx)("i",{className:"fas fa-sync-alt fa-spin"})}),(0,l.jsx)("span",{children:"Please wait"})]})})]})})})})})}),m=e=>{let{onBlogCreated:s}=e,[a,i]=(0,t.useState)(""),[n,c]=(0,t.useState)(""),[r,o]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),u=async e=>{e.preventDefault(),o(!0),h(null);try{await d.addBlog({title:a,content:n}),i(""),c(""),s&&s()}catch(e){h(e instanceof Error?e.message:"Failed to create blog")}finally{o(!1)}};return(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h2",{className:"title is-4",children:"Create New Blog"}),m&&(0,l.jsxs)("div",{className:"notification is-danger",children:[(0,l.jsx)("button",{className:"delete",onClick:()=>h(null)}),m]}),(0,l.jsxs)("form",{onSubmit:u,children:[(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Title"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("input",{className:"input",type:"text",placeholder:"Enter blog title",value:a,onChange:e=>i(e.target.value),required:!0})})]}),(0,l.jsxs)("div",{className:"field",children:[(0,l.jsx)("label",{className:"label",children:"Content"}),(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("textarea",{className:"textarea",placeholder:"Enter blog content",value:n,onChange:e=>c(e.target.value),rows:5,required:!0})})]}),(0,l.jsx)("div",{className:"field",children:(0,l.jsx)("div",{className:"control",children:(0,l.jsx)("button",{className:"button is-primary ".concat(r?"is-loading":""),type:"submit",disabled:r,children:"Create Blog"})})})]})]})},h=function(){let[e,s]=(0,t.useState)([]),[a,i]=(0,t.useState)(!0),[n,c]=(0,t.useState)(null);return((0,t.useEffect)(()=>{(async function(){try{let e=await d.getBlogs();s(e)}catch(e){c(e instanceof Error?e.message:"An error occurred")}finally{i(!1)}})()},[]),a)?(0,l.jsx)(o,{}):n?(0,l.jsxs)("div",{children:["Error: ",n]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"title is-1",children:"Home"}),(0,l.jsx)(m,{}),e.map(a=>(0,l.jsxs)("div",{className:"blog-item box",children:[(0,l.jsx)("h2",{className:"title is-3",children:a.title}),(0,l.jsx)("p",{children:a.content}),(0,l.jsx)("span",{children:(0,l.jsx)("a",{href:"/blogs/".concat(a.id),className:"button is-primary show-blog",children:"Read more"})}),(0,l.jsx)("span",{children:(0,l.jsx)("button",{className:"button is-danger deleteBlog",onClick:()=>d.deleteBlog(a.id).then(()=>{s(e.filter(e=>e.id!==a.id))}),children:"Delete"})})]},a.id))]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,778,441,517,358],()=>s(7209)),_N_E=e.O()}]);